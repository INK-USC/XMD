var We=Object.defineProperty,Me=Object.defineProperties;var Te=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var Se=(e,t,i)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,U=(e,t)=>{for(var i in t||(t={}))Be.call(t,i)&&Se(e,i,t[i]);if(ye)for(var i of ye(t))Ve.call(t,i)&&Se(e,i,t[i]);return e},K=(e,t)=>Me(e,Te(t));import{o as u,c as v,a as De,E as re,d as O,r,b,w as n,e as _,f as o,g as B,F as M,h as p,i as we,_ as le,D as Ae,t as P,j as Ue,u as ue,m as Ee,s as Oe,k as ve,l as ze,n as ke,p as q,q as Q,v as _e,x as se,y as ie,z as L,A as Ne,B as Re,C as Ge,G as R,H as qe,I as pe,J as Qe,K as Je,L as He,M as Ke,N as Ie,O as $e,P as Ce,Q as Ze,R as Xe,S as Ye,T as et,U as tt,V as ot,W as nt,X as rt,Y as lt,Z as st,$ as it}from"./vendor.78d126bc.js";const ct=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerpolicy&&(c.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?c.credentials="include":l.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}};ct();var C=(e,t)=>{const i=e.__vccOpts||e;for(const[s,l]of t)i[s]=l;return i};const at={name:"HomePage",components:{}},dt={style:{"text-align":"center"}};function ut(e,t,i,s,l,c){return u(),v("h1",dt,"Home page of HILT Demo")}var _t=C(at,[["render",ut]]);const E={1:"Sequence Classification",2:"Relation Extraction"},N={0:{name:"Neutral",colors:[{"background-color":"#FFFFFF",color:"#000000"},{"background-color":"#FFFFFF",color:"#000000"},{"background-color":"#FFFFFF",color:"#000000"},{"background-color":"#FFFFFF",color:"#000000"},{"background-color":"#FFFFFF",color:"#000000"}]},1:{name:"Red",colors:[{"background-color":"#EA9999",color:"#000000"},{"background-color":"#E06666",color:"#FFFFFF"},{"background-color":"#CC0000",color:"#FFFFFF"}]},2:{name:"Blue",colors:[{"background-color":"#ADD8E6",color:"#000000"},{"background-color":"#4682B4",color:"#000000"},{"background-color":"#00008B",color:"#FFFFFF"}]},3:{name:"Green",colors:[{"background-color":"#8AFF8A",color:"#000000"},{"background-color":"#00D100",color:"#FFFFFF"},{"background-color":"#007500",color:"#FFFFFF"}]},4:{name:"Purple",colors:[{"background-color":"#CC85FF",color:"#000000"},{"background-color":"#7700CC",color:"#FFFFFF"},{"background-color":"#3E006B",color:"#FFFFFF"}]},5:{name:"Orange",colors:[{"background-color":"#FFCA8A",color:"#000000"},{"background-color":"#FFA12E",color:"#000000"},{"background-color":"#D67600",color:"#000000"}]}};De.defaults.baseURL="/api";const k=De.create({headers:{Accept:"application/json","Content-Type":"application/json",Authorization:null}});k.interceptors.response.use(e=>e.data,e=>(re({title:"Error",message:e.toString(),type:"error"}),Promise.reject(e)));k.interceptors.request.use(e=>e,e=>(re({title:"Error",message:e.toString(),type:"error"}),Promise.reject(e)));var G={list(){return k.get("hilt/projects/")},get(e){return k.get(`hilt/projects/${e}/`)},create(e){return k.post("hilt/projects/",e)},update(e){return k.put(`hilt/projects/${e.id}/`,e)},delete(e){return k.delete(`hilt/projects/${e}/`)},exportJSON(e){return k.get(`hilt/export/json/${e}/`)}};const W=O({id:"project",state:()=>({projectInfo:null}),getters:{getProjectInfo:e=>e.projectInfo,task:e=>e.projectInfo.task},actions:{reset_state(){G.get(this.projectInfo.id).then(e=>(console.log("reset_project_state",e),this.projectInfo=e,e),e=>{console.log(e)})},setProject(e){this.projectInfo=e},setTask(e){this.projectInfo.task=e},exportJSON(){return G.exportJSON(this.projectInfo.id)}}}),pt={name:"CreateProjectModal",props:{dialogVisible:Boolean,existingInfo:Object},setup(){const e=W(),t=[];for(let i in E)t.push({id:i,name:E[i]});return{projectStore:e,taskOptions:t}},data(){return{projectInfo:{name:"",description:"",task:""},formRules:{name:[{required:!0,message:"Please input project name",trigger:"blur"}],description:[{required:!0,message:"Please input description",trigger:"blur"}],task:[{required:!0,message:"Please select task",trigger:"blur"}]}}},methods:{dialogIsOpen(){if(this.existingInfo)for(let e in this.existingInfo)this.projectInfo[e]=this.existingInfo[e];else this.projectInfo={name:"",description:"",task:""}},createProject(){this.$refs.projectInfoForm.validate(e=>{if(e){let t;this.existingInfo?t=G.update(this.projectInfo):t=G.create(this.projectInfo),t.then(i=>{this.projectStore.setProject(i),this.$emit("update:dialogVisible",!1),this.$router.push({name:"DocumentUpload"})})}})}}},mt={class:"dialog-footer"},ft=p("Cancel"),ht=p("Confirm");function gt(e,t,i,s,l,c){const a=r("el-input"),d=r("el-form-item"),m=r("el-option"),f=r("el-select"),h=r("el-form"),S=r("el-button"),D=r("el-dialog");return u(),b(D,{title:this.existingInfo?"Edit Existing Project":"Create New Project",modelValue:i.dialogVisible,"onUpdate:modelValue":t[4]||(t[4]=g=>i.dialogVisible=g),"onUpdate:visible":t[5]||(t[5]=g=>e.$emit("update:dialogVisible",g)),onOpen:this.dialogIsOpen,width:"40%"},{footer:n(()=>[_("span",mt,[o(S,{onClick:t[3]||(t[3]=()=>e.$emit("update:dialogVisible",!1))},{default:n(()=>[ft]),_:1}),o(S,{type:"primary",onClick:c.createProject},{default:n(()=>[ht]),_:1},8,["onClick"])])]),default:n(()=>[o(h,{model:l.projectInfo,rules:l.formRules,ref:"projectInfoForm"},{default:n(()=>[o(d,{label:"Name",prop:"name"},{default:n(()=>[o(a,{modelValue:l.projectInfo.name,"onUpdate:modelValue":t[0]||(t[0]=g=>l.projectInfo.name=g)},null,8,["modelValue"])]),_:1}),o(d,{label:"Description",prop:"description"},{default:n(()=>[o(a,{modelValue:l.projectInfo.description,"onUpdate:modelValue":t[1]||(t[1]=g=>l.projectInfo.description=g)},null,8,["modelValue"])]),_:1}),o(d,{label:"Task",prop:"task"},{default:n(()=>[o(f,{remote:"",modelValue:l.projectInfo.task,"onUpdate:modelValue":t[2]||(t[2]=g=>l.projectInfo.task=g),placeholder:"Select",style:{width:"100%"}},{default:n(()=>[(u(!0),v(M,null,B(s.taskOptions,g=>(u(),b(m,{key:g.id,label:g.name,value:g.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onOpen"])}var yt=C(pt,[["render",gt]]);const St={name:"ProjectsPage",components:{CreateProjectModal:yt,Edit:we,Delete:le},setup(){const e=z(),t=W(),i=[];for(let s in E)i.push({text:E[s],value:E[s]});return{userStore:e,projectStore:t,filters:i}},data(){return{projects:[],dialogVisible:!1,selectedProject:null}},created:function(){this.fetchProjects()},methods:{handleProjectSelected(e,t){this.$router.push({name:"DocumentList"}),this.projectStore.setProject(t)},handleEdit(e,t){this.selectedProject=t,this.dialogVisible=!0},handleDelete(e,t){G.list(t.id).then(()=>{this.fetchProjects()})},fetchProjects(){G.list().then(e=>{this.projects=e.results},e=>{console.log(e)})},dateFormat(e,t){let i=e[t.property];return i?Ae.fromISO(i).toISODate():""},convertTaskIDToString(e,t){let i=e[t.property];return i?E[i]:""},filterTask(e,t,i){let s=t[i.property],l=E[s];return e===l}}},bt={style:{"text-align":"center"}},xt=p("CREATE PROJECT "),Dt=p(" Edit "),wt=p("Delete");function vt(e,t,i,s,l,c){const a=r("el-button"),d=r("el-col"),m=r("el-row"),f=r("el-link"),h=r("el-table-column"),S=r("Edit"),D=r("el-icon"),g=r("Delete"),w=r("el-popconfirm"),I=r("el-table"),x=r("CreateProjectModal");return u(),v("div",null,[_("div",bt,[_("h1",null,"Hello, "+P(this.userStore.username),1),o(m,null,{default:n(()=>[o(d,{span:12,offset:6},{default:n(()=>[o(a,{type:"primary",onClick:t[0]||(t[0]=()=>{this.selectedProject=null,this.dialogVisible=!0})},{default:n(()=>[xt]),_:1})]),_:1})]),_:1})]),o(m,null,{default:n(()=>[o(d,{span:12,offset:6},{default:n(()=>[o(I,{data:l.projects,stripe:"","default-sort":{prop:"updated_at",order:"descending"}},{default:n(()=>[o(h,{prop:"name",label:"Name",sortable:""},{default:n(y=>[o(f,{type:"primary",onClick:F=>c.handleProjectSelected(y.$index,y.row)},{default:n(()=>[p(P(y.row.name),1)]),_:2},1032,["onClick"])]),_:1}),o(h,{prop:"description",label:"Description",sortable:""}),o(h,{prop:"task",label:"Task",formatter:c.convertTaskIDToString,sortable:"",filters:this.filters,"filter-method":c.filterTask},null,8,["formatter","filters","filter-method"]),o(h,{prop:"updated_at",label:"Last Updated",formatter:c.dateFormat,sortable:""},null,8,["formatter"]),o(h,{label:"Operations"},{default:n(y=>[o(a,{size:"small",onClick:F=>c.handleEdit(y.$index,y.row)},{default:n(()=>[o(D,null,{default:n(()=>[o(S)]),_:1}),Dt]),_:2},1032,["onClick"]),o(w,{title:"Are you sure?",onConfirm:F=>c.handleDelete(y.$index,y.row),style:{"margin-left":"10px"}},{reference:n(()=>[o(a,{size:"small",type:"danger"},{default:n(()=>[o(D,null,{default:n(()=>[o(g)]),_:1}),wt]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),o(x,{"dialog-visible":l.dialogVisible,"onUpdate:dialog-visible":t[1]||(t[1]=y=>l.dialogVisible=y),"existing-info":this.selectedProject},null,8,["dialog-visible","existing-info"])])}var kt=C(St,[["render",vt]]);const It={name:"SetupSideBar",components:{Files:Ue,UploadFilled:ue,MessageBox:Ee,StarFilled:Oe,Edit:we,Download:ve,DataAnalysis:ze,Tools:ke},computed:{disabled(){const e=this.projectStore.getProjectInfo;return Boolean(e.selected_model=="running")}},setup(){return{projectStore:W()}}},J=e=>(q("data-v-edd93732"),e=e(),Q(),e),$t=J(()=>_("span",null,"Corpus",-1)),Ct=p(" Overview "),Ft=p(" Upload New Document "),jt=J(()=>_("span",null,"Custom Model",-1)),Pt=p(" Upload Custom Model "),Lt=J(()=>_("span",null,"Labels",-1)),Wt=J(()=>_("span",null,"Generate Explanations",-1)),Mt=J(()=>_("span",null,"Export Data",-1)),Tt=J(()=>_("span",null,"Continue debugging",-1));function Bt(e,t,i,s,l,c){const a=r("MessageBox"),d=r("el-icon"),m=r("Files"),f=r("el-menu-item"),h=r("UploadFilled"),S=r("el-menu-item-group"),D=r("el-sub-menu"),g=r("Tools"),w=r("StarFilled"),I=r("DataAnalysis"),x=r("Download"),y=r("el-menu"),F=r("Edit"),j=r("el-col");return u(),b(j,null,{default:n(()=>[o(y,{"default-active":e.$route.path,router:!0},{default:n(()=>[o(D,{index:"1"},{title:n(()=>[o(d,null,{default:n(()=>[o(a)]),_:1}),$t]),default:n(()=>[o(S,null,{default:n(()=>[o(f,{index:"/project/doc/list"},{default:n(()=>[o(d,null,{default:n(()=>[o(m)]),_:1}),Ct]),_:1}),o(f,{index:"/project/doc/upload",disabled:c.disabled},{default:n(()=>[o(d,null,{default:n(()=>[o(h)]),_:1}),Ft]),_:1},8,["disabled"])]),_:1})]),_:1}),o(D,{index:"2"},{title:n(()=>[o(d,null,{default:n(()=>[o(g)]),_:1}),jt]),default:n(()=>[o(S,null,{default:n(()=>[o(f,{index:"/project/doc/model",disabled:c.disabled},{default:n(()=>[o(d,null,{default:n(()=>[o(h)]),_:1}),Pt]),_:1},8,["disabled"])]),_:1})]),_:1}),o(f,{index:"/project/labels"},{default:n(()=>[o(d,null,{default:n(()=>[o(w)]),_:1}),Lt]),_:1}),o(f,{index:"/project/generate-explanations"},{default:n(()=>[o(d,null,{default:n(()=>[o(I)]),_:1}),Wt]),_:1}),o(f,{index:"/project/export"},{default:n(()=>[o(d,null,{default:n(()=>[o(x)]),_:1}),Mt]),_:1})]),_:1},8,["default-active"]),o(y,null,{default:n(()=>[o(f,{onClick:t[0]||(t[0]=()=>this.$router.push({name:"DebugOverview"}))},{default:n(()=>[o(d,null,{default:n(()=>[o(F)]),_:1}),Tt]),_:1})]),_:1})]),_:1})}var Vt=C(It,[["render",Bt],["__scopeId","data-v-edd93732"]]);const At={name:"ProjectSetupPage",components:{SetupSideBar:Vt}};function Ut(e,t,i,s,l,c){const a=r("SetupSideBar"),d=r("el-aside"),m=r("router-view"),f=r("el-main"),h=r("el-container");return u(),v("div",null,[o(h,null,{default:n(()=>[o(d,{style:{"border-right":"solid 1px #e6e6e6"}},{default:n(()=>[o(a,{style:{width:"100%"}})]),_:1}),o(f,null,{default:n(()=>[o(m)]),_:1})]),_:1})])}var Et=C(At,[["render",Ut]]);const Ot={name:"SetupDocument"};function zt(e,t,i,s,l,c){const a=r("router-view");return u(),b(a)}var Nt=C(Ot,[["render",zt]]),Z={list(e,t,i){const s={};return t&&(s.page=t),i&&(s.page_size=i),k.get(`hilt/projects/${e}/docs/`,{params:s})},uploadFile(e,t,i){const s=new FormData;return s.append("dataset",t),s.append("format",i.toLowerCase()),k.post(`hilt/projects/${e}/docs/upload/`,s,{headers:K(U({},k.defaults.headers),{"Content-Type":"multipart/form-data"})})},markAnnotated(e,t){return console.log("documents API",e,":	",t),k.put(`hilt/projects/${e}/docs/${t}/`,{annotated:!0})},delete(e,t){return k.delete(`hilt/projects/${e}/docs/${t}/`)},detailedDocument(e,t){return k.get(`hilt/projects/${e}/docs/${t}/words-annotations/`)}};const me=O({id:"document",state:()=>({documents:[],curPage:1,maxPage:1,totalDocCount:0,curDocIndex:0,annotatedDocCount:0,pageSize:10}),getters:{getDocuments:e=>e.documents,getdocumentInfo:e=>e},actions:{resetState(){return this.curPage=1,this.pageSize=10,this.fetchDocuments()},setCurDocIndex(e){this.curDocIndex=e},fetchDocuments(){const e=W();return Z.list(e.getProjectInfo.id,this.curPage,this.pageSize).then(t=>(this.documents=t.results.results,this.totalDocCount=t.count,this.annotatedDocCount=t.results.annotatedCount,this.maxPage=Math.ceil(this.totalDocCount/this.pageSize),t))},updateCurPage(e){return this.curPage=e,this.curDocIndex=0,this.fetchDocuments()},deleteDocument(e){const t=W();return Z.delete(t.getProjectInfo.id,e.id)},markAnnotated(){const e=W();return this.documents[this.curDocIndex].id?(console.log(e.getProjectInfo.id,this.documents[this.curDocIndex].id),Z.markAnnotated(e.getProjectInfo.id,this.documents[this.curDocIndex].id).then(()=>{this.document[this.curDocIndex].annotated=!0})):null}}}),Rt={name:"DocumentList",components:{Search:_e,Delete:le},setup(){return{documentStore:me()}},data(){return{searchQuery:""}},methods:{pageChanged(e){this.documentStore.updateCurPage(e)},indexMethod(e){return e+1},percentageText(e){return`${e} % annotated`},handleDelete(e,t){this.documentStore.deleteDocument(t).then(()=>{this.documentStore.fetchDocuments()})}},created(){this.documentStore.resetState()},computed:{percentageCompleted(){const e=this.documentStore.getdocumentInfo;if(!e)return 0;const t=e.annotatedDocCount,i=e.totalDocCount,s=t/i*100;return s||0}}},Gt={style:{"text-align":"center"}},qt=_("h1",null,"All Uploaded Documents",-1),Qt={style:{"align-content":"center"}},Jt=p("Delete");function Ht(e,t,i,s,l,c){const a=r("el-progress"),d=r("Search"),m=r("el-icon"),f=r("el-input"),h=r("el-table-column"),S=r("Delete"),D=r("el-button"),g=r("el-popconfirm"),w=r("el-table"),I=r("el-pagination"),x=se("snip");return u(),v("div",null,[_("div",Gt,[_("div",null,[qt,o(a,{type:"circle",percentage:c.percentageCompleted,format:c.percentageText},null,8,["percentage","format"])]),o(f,{modelValue:l.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=y=>l.searchQuery=y),placeholder:"Type to search for documents",style:{width:"50%"},clearable:""},{prefix:n(()=>[_("div",Qt,[o(m,null,{default:n(()=>[o(d)]),_:1})])]),_:1},8,["modelValue"])]),o(w,{data:s.documentStore.getDocuments.filter(y=>!l.searchQuery||y.text.toLowerCase().includes(l.searchQuery.toLowerCase().trim())),stripe:""},{default:n(()=>[o(h,{type:"index",index:c.indexMethod},null,8,["index"]),o(h,{label:"Text"},{default:n(y=>[ie((u(),v("p",null,[p(P(y.row.text),1)])),[[x,{lines:3}]])]),_:1}),o(h,{label:"Operations"},{default:n(y=>[o(g,{title:"Are you sure?",onConfirm:F=>c.handleDelete(y.$index,y.row),style:{"margin-left":"10px"}},{reference:n(()=>[o(D,{size:"small",type:"danger"},{default:n(()=>[o(m,null,{default:n(()=>[o(S)]),_:1}),Jt]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),o(I,{background:"",layout:"prev, pager, next",total:s.documentStore.getdocumentInfo.totalDocCount,"page-size":s.documentStore.getdocumentInfo.pageSize,"current-page":s.documentStore.getdocumentInfo.curPage,onCurrentChange:c.pageChanged,style:{"text-align":"center"}},null,8,["total","page-size","current-page","onCurrentChange"])])}var Kt=C(Rt,[["render",Ht]]);const Zt={name:"DocumentUpload",components:{UploadFilled:ue},setup(){return{projectStore:W()}},data(){return{fileForm:{fileType:"JSON"}}},methods:{uploadFile(e){Z.uploadFile(this.projectStore.getProjectInfo.id,e.file,this.fileForm.fileType).then(()=>{this.$router.push({name:"Labels"})}).catch(t=>{console.log(t)})}}},T=e=>(q("data-v-94cda20c"),e=e(),Q(),e),Xt=T(()=>_("h3",null,"Import your corpus below",-1)),Yt=T(()=>_("div",null,[p(" In order to start the annotation process, a corpus "),_("u",null,"must"),p(" be uploaded ")],-1)),eo=T(()=>_("div",null,"We accept datasets in the following formats:",-1)),to=T(()=>_("b",null,"JSON (recommended)",-1)),oo=T(()=>_("br",null,null,-1)),no=T(()=>_("u",null,"Format:",-1)),ro={style:{width:"fit-content","padding-left":"20px","padding-right":"20px",height:"fit-content"}},lo=p("                "),so=p(`
{
  "data" : [
    {
      "text" : "Louis Armstrong the great trumpet player lived in Corona.",
      "words": ["Louis", "Armstrong", "the", "great", "trumpet", "player", "lived", "in", "Corona."],
      "annotations": [
        {
    `),io=p(`
          "label": "Label-Name-1"
    `),co=p(`
          "label": "Label-Name-1",
          "start_offset": 0,
          "end_offset": 5,
    `),ao=p(`
        }
      ]
    },
    ...
  ]
}
              `),uo=p(`
							`),_o=p(" Each entry within "),po=T(()=>_("i",null,"data",-1)),mo=p(" must have keys "),fo=T(()=>_("i",null,[_("b",null,"text")],-1)),ho=p(" and "),go=T(()=>_("i",null,[_("b",null,"words")],-1)),yo=p(". All other keys will be saved in a metadata dictionary associated with the text "),So=T(()=>_("br",null,null,-1)),bo=p(" The "),xo=T(()=>_("i",null,[_("b",null,"annotations")],-1)),Do=p(" key in each entry is optional. And, can be used to populate the document with label. "),wo=p("JSON file"),vo=T(()=>_("div",{class:"el-upload__text"},[p(" Drop file here or "),_("em",null,"click to upload")],-1));function ko(e,t,i,s,l,c){const a=r("el-radio"),d=r("el-form-item"),m=r("UploadFilled"),f=r("el-icon"),h=r("el-upload"),S=r("el-form"),D=r("el-card"),g=r("el-col"),w=r("el-row");return u(),b(w,null,{default:n(()=>[o(g,null,{default:n(()=>[o(D,null,{header:n(()=>[Xt]),default:n(()=>[_("div",null,[Yt,eo,_("ul",null,[_("li",null,[to,oo,no,_("pre",ro,[lo,_("code",null,[so,this.projectStore.task===1?(u(),v(M,{key:0},[io],64)):L("",!0),this.projectStore.task===2?(u(),v(M,{key:1},[co],64)):L("",!0),ao]),uo]),_o,po,mo,fo,ho,go,yo,So,bo,xo,Do])])]),o(S,{model:this.fileForm,style:{"text-align":"center"}},{default:n(()=>[o(d,null,{default:n(()=>[o(a,{modelValue:l.fileForm.fileType,"onUpdate:modelValue":t[0]||(t[0]=I=>l.fileForm.fileType=I),label:"JSON",border:""},{default:n(()=>[wo]),_:1},8,["modelValue"])]),_:1}),o(d,{label:""},{default:n(()=>[o(h,{"http-request":c.uploadFile,drag:"",accept:"text/json",ref:"uploadInput",action:""},{default:n(()=>[o(f,{size:48},{default:n(()=>[o(m)]),_:1}),vo]),_:1},8,["http-request"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}var Io=C(Zt,[["render",ko],["__scopeId","data-v-94cda20c"]]),oe={list(e){return k.get(`hilt/projects/${e}/models/`)},uploadModel(e,t,i){const s=new FormData;return s.append("model_zip",t),s.append("format",i.toLowerCase()),console.log(s),k.post(`hilt/projects/${e}/models/upload/`,s,{headers:K(U({},k.defaults.headers),{"Content-Type":"multipart/form-data"})})}};const $o={name:"ModelUpload",components:{UploadFilled:ue,Upload:Ne,SuccessFilled:Re},setup(){return{projectStore:W()}},data(){return{modelRadio:"Upload Model",modelList:[],fileForm:{fileType:".zip",fileZip:[],file:null},savingSuccessful:!1}},methods:{handleUpload(e){oe.uploadModel(this.projectStore.getProjectInfo.id,e.file,this.fileForm.fileType).then(t=>{console.log(t),t!=null&&t.success&&(this.savingSuccessful=!0)}).catch(t=>{console.log(t)})},uploadFile(){this.$refs.modelUploadForm.validate(e=>{e&&oe.uploadModel(this.projectStore.getProjectInfo.id,this.fileForm.file,this.fileForm.description,this.fileForm.fileType).then(()=>{}).catch(t=>{console.log(t)})})},getModelList(){oe.list(this.projectStore.getProjectInfo.id).then(e=>{this.modelList=e.results,console.log("res",e),console.log("model list:",this.modelList)})},created(){this.getModelList()}}},fe=e=>(q("data-v-3c7fc95e"),e=e(),Q(),e),Co=fe(()=>_("h3",null,"Model List",-1)),Fo=fe(()=>_("h3",null,"Upload new model",-1)),jo=p(".ZIP file"),Po=fe(()=>_("div",{class:"el-upload__text"},[p(" Drop file here or "),_("em",null,"click to upload")],-1)),Lo={key:0,class:"success",style:{color:"green"}},Wo=p("Model was saved successfully ");function Mo(e,t,i,s,l,c){const a=r("el-table-column"),d=r("el-table"),m=r("el-card"),f=r("el-radio"),h=r("el-form-item"),S=r("UploadFilled"),D=r("el-icon"),g=r("el-upload"),w=r("SuccessFilled"),I=r("el-form"),x=r("el-col"),y=r("el-row");return u(),b(y,null,{default:n(()=>[o(x,null,{default:n(()=>[l.modelRadio=="Model List"?(u(),b(m,{key:0},{header:n(()=>[Co]),default:n(()=>[o(d,{data:this.modelList,stripe:"",style:{width:"100%"}},{default:n(()=>[o(a,{prop:"id",label:"Id"}),o(a,{prop:"name",label:"Name"}),o(a,{prop:"model",label:"Model path"}),o(a,{prop:"uploaded_at",label:"Uploaded at"})]),_:1},8,["data"])]),_:1})):L("",!0),l.modelRadio=="Upload Model"?(u(),b(m,{key:1},{header:n(()=>[Fo]),default:n(()=>[o(I,{model:this.fileForm,ref:"modelUploadForm",style:{"text-align":"center"}},{default:n(()=>[o(h,null,{default:n(()=>[o(f,{modelValue:l.fileForm.fileType,"onUpdate:modelValue":t[0]||(t[0]=F=>l.fileForm.fileType=F),label:".zip",border:""},{default:n(()=>[jo]),_:1},8,["modelValue"])]),_:1}),o(h,null,{default:n(()=>[o(g,{"file-list":l.fileForm.fileZip,"onUpdate:file-list":t[1]||(t[1]=F=>l.fileForm.fileZip=F),drag:"",accept:".zip",ref:"uploadInput",action:"","http-request":c.handleUpload},{default:n(()=>[o(D,{size:48},{default:n(()=>[o(S)]),_:1}),Po]),_:1},8,["file-list","http-request"])]),_:1}),l.savingSuccessful?(u(),v("div",Lo,[_("p",null,[Wo,o(D,null,{default:n(()=>[o(w)]),_:1})])])):L("",!0)]),_:1},8,["model"])]),_:1})):L("",!0)]),_:1})]),_:1})}var To=C($o,[["render",Mo],["__scopeId","data-v-3c7fc95e"]]),be={list(e){return k.get(`hilt/projects/${e}/labels/?page_size=100`)},update(e,t){return k.put(`hilt/projects/${e}/labels/${t.id}/`,t)}};const Y=O({id:"label",state:()=>({labels:[],labelsMap:{}}),getters:{getLabels:e=>e.labels,getLabelByID:e=>t=>!t||!(t in e.labelsMap)?null:e.labels[e.labelsMap[t]]},actions:{fetchLabels(){const e=W();return be.list(e.getProjectInfo.id).then(t=>{const i={};for(let s=0;s<t.results.length;s++){const l=t.results[s];i[l.id]=s}return this.labels=t.results,this.labelsMap=i,t.results})},updateLabel(e){const t=W();return be.update(t.getProjectInfo.id,e)}}}),Bo={name:"LabelModificationPage",components:{QuestionFilled:Ge},setup(){const e=Y(),t=[];for(let i in N)t.push({id:i,name:N[i].name});return{labelStore:e,colorSetOptions:t}},data(){return{existingLabels:[],colors_sets:[],saving:!1}},methods:{goNextStep(){this.saving=!0;const e=[];for(let t=0;t<this.existingLabels.length;t++){const i=this.existingLabels[t],s=parseInt(this.colors_sets[t]);i.color_set!=s&&(i.color_set=s,e.push(this.labelStore.updateLabel(i)))}Promise.all(e).then(()=>{this.saving=!1,this.labelStore.fetchLabels(),this.$router.push({name:"GenerateExplanations"})})},getColors(e){return e=parseInt(e),e in N?N[e].colors:[]}},created(){this.labelStore.fetchLabels().then(e=>{const t={};for(let i in e)t[i]=""+e[i].color_set;this.colors_sets=t,this.existingLabels=e})},computed:{disableButton(){if(this.saving)return!0;const e={};for(let t in this.colors_sets){if(t in e)return!0;e[t]=null}return!1}}},Vo=_("h3",null,"Label Space Creation",-1),Ao={style:{"text-align":"left"}},Uo=_("b",null,"Current Label Space",-1),Eo={style:{"margin-left":"5px"}},Oo=p(" Done ");function zo(e,t,i,s,l,c){const a=r("QuestionFilled"),d=r("el-icon"),m=r("el-popover"),f=r("el-col"),h=r("el-row"),S=r("el-divider"),D=r("el-option"),g=r("el-select"),w=r("el-form-item"),I=r("el-button"),x=r("el-form"),y=r("el-card");return u(),b(h,{style:{width:"100%"}},{default:n(()=>[o(y,{style:{width:"100%"}},{header:n(()=>[Vo]),default:n(()=>[_("div",Ao,[o(h,null,{default:n(()=>[o(f,{span:8},{default:n(()=>[o(m,{content:"Available labels for model to predict.",trigger:"hover"},{reference:n(()=>[_("span",null,[Uo,o(d,{style:{"margin-left":"5px"}},{default:n(()=>[o(a)]),_:1})])]),_:1})]),_:1})]),_:1}),o(S),o(x,{model:l.colors_sets},{default:n(()=>[(u(!0),v(M,null,B(this.existingLabels,(F,j)=>(u(),b(h,{key:F.id},{default:n(()=>[o(w,{label:F.text},{default:n(()=>[o(g,{modelValue:this.colors_sets[j],"onUpdate:modelValue":V=>this.colors_sets[j]=V,placeholder:"Select",style:{width:"100%"}},{default:n(()=>[(u(!0),v(M,null,B(this.colorSetOptions,V=>(u(),b(D,{key:V.id,label:V.name,value:V.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]),_("div",Eo,[(u(!0),v(M,null,B(this.getColors(this.colors_sets[j]),(V,te)=>(u(),v("span",{key:te,style:R([V,{"margin-left":"5px",padding:"5px"}])}," Word ",4))),128))])]),_:2},1024))),128)),o(h,null,{default:n(()=>[o(I,{type:"success",disabled:this.disableButton,onClick:c.goNextStep},{default:n(()=>[Oo]),_:1},8,["disabled","onClick"])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1})}var No=C(Bo,[["render",zo]]),ce={generateExplanations(e,t,{str:i,model_id:s,model_path:l}={}){console.log("inside network/explanations.js");const c=new FormData;return c.append("useHuggingface",t),t?c.append("str",i):(c.append("model_id",s),c.append("model_path",l)),console.log(c),k.post(`hilt/projects/${e}/explanations/`,c,{headers:K(U({},k.defaults.headers),{"Content-Type":"multipart/form-data"})})},didFinishGeneration(e){return k.get(`hilt/projects/${e}/update/model_status/`)}};const Ro={name:"GenerateExplanations",components:{Tools:ke},setup(){return{projectStore:W()}},data(){return{generating_explanations:!1,huggingfaceForm:{str:"",rules:{str:{required:!0,message:"Please input huggingface string",trigger:"blur"}}},customModelForm:{modelList:[],select:"",rules:{select:{required:!0,message:"Please select model",trigger:"change"}}}}},methods:{getModelList(){console.log("model list"),oe.list(this.projectStore.getProjectInfo.id).then(e=>{this.customModelForm.modelList=e.results})},huggingfaceSubmit(){this.$refs.huggingfaceForm.validate(e=>{e&&(console.log("huggingface generate explanations"),ce.generateExplanations(this.projectStore.getProjectInfo.id,!0,{str:this.huggingfaceForm.str}).then(t=>{console.log("Here"),console.log(t),this.generating_explanations=!0,this.waitForCompletion(),re({title:"Explanation Generation Started",message:"Page will automatically change once task is completed",type:"success",duration:0})}).catch(t=>{t.response&&t.response.data?this.$notify.error({title:"Model training failed",message:t.response.data}):this.$notify.error({title:"Model failed to start training",message:"Please try again later"})}))})},customModelSubmit(){this.$refs.customModelForm.validate(e=>{e&&(console.log("custom model generate explanations"),console.log("model_id:",this.customModelForm.select[0]),console.log("model_path",this.customModelForm.select[1]),ce.generateExplanations(this.projectStore.getProjectInfo.id,!1,{model_id:this.customModelForm.select[0],model_path:this.customModelForm.select[1]}).then(t=>{const i=this.projectStore.getProjectInfo;this.projectStore.reset_state(),console.log(i.selected_model),console.log(t),this.generating_explanations=!0,this.waitForCompletion(),re({title:"Explanation Generation Started",message:"Page will automatically change once task is",type:"success",duration:0})}).catch(t=>{console.log(t),t.response&&t.response.data?this.$notify.error({title:"Model training failed",message:t.response.data}):this.$notify.error({title:"Model failed to start training",message:"Please try again later"})}))})},waitForCompletion(){let e=10,t=setInterval(()=>ce.didFinishGeneration(this.projectStore.getProjectInfo.id).then(i=>{console.log(i),e<0||i.status=="finished"?(console.log("finished"),this.$notify.success({title:"Success",message:"Model Execution had been completed",duration:0}),clearInterval(t),this.$router.push({name:"DebugLocal"})):(console.log("Waiting for model finish message."),e-=1,console.log(e))}),1e3)}},mounted(){this.getModelList()}},Go=_("h3",null,"Generate Explanations Page",-1),qo=p("Generate Explanations"),Qo=p("Generate Explanations");function Jo(e,t,i,s,l,c){const a=r("el-input"),d=r("el-col"),m=r("el-form-item"),f=r("el-button"),h=r("el-form"),S=r("el-tab-pane"),D=r("el-option"),g=r("el-select"),w=r("el-alert"),I=r("el-tabs");return u(),v(M,null,[Go,o(I,{type:"border-card"},{default:n(()=>[o(S,{label:"Huggingface"},{default:n(()=>[o(h,{model:l.huggingfaceForm,ref:"huggingfaceForm",rules:l.huggingfaceForm.rules,"label-position":"top"},{default:n(()=>[o(m,{label:"huggingface string",prop:"str"},{default:n(()=>[o(d,{span:6},{default:n(()=>[o(a,{modelValue:l.huggingfaceForm.str,"onUpdate:modelValue":t[0]||(t[0]=x=>l.huggingfaceForm.str=x)},null,8,["modelValue"])]),_:1})]),_:1}),o(m,null,{default:n(()=>[o(f,{type:"primary",onClick:c.huggingfaceSubmit},{default:n(()=>[qo]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),o(S,{label:"Custom Model"},{default:n(()=>[o(h,{model:l.customModelForm,ref:"customModelForm",rules:l.customModelForm.rules,"label-position":"top"},{default:n(()=>[o(m,{label:"Custom Model",prop:"select"},{default:n(()=>[o(g,{modelValue:l.customModelForm.select,"onUpdate:modelValue":t[1]||(t[1]=x=>l.customModelForm.select=x),clearable:"",placeholder:"Select Model"},{default:n(()=>[(u(!0),v(M,null,B(l.customModelForm.modelList,x=>(u(),b(D,{key:x.id,label:x.name,value:[x.id,x.model]},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(m,null,{default:n(()=>[o(f,{type:"primary",onClick:c.customModelSubmit},{default:n(()=>[Qo]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"]),l.generating_explanations?(u(),b(w,{key:0,title:"Generating Explanations...",type:"info",description:"will update once the task in done",center:"","show-icon":"",closable:!1})):L("",!0)]),_:1})]),_:1})],64)}var Ho=C(Ro,[["render",Jo]]);const Ko={name:"ExportData",components:{Download:ve},setup(){return{projectStore:W()}},methods:{exportJSON(){this.projectStore.exportJSON().then(e=>{qe(JSON.stringify(e,null,1),`${this.projectStore.getProjectInfo.name}.json`)})}}},Zo=p(" Download JSON data ");function Xo(e,t,i,s,l,c){const a=r("Download"),d=r("el-icon"),m=r("el-button");return u(),b(m,{type:"primary",onClick:t[0]||(t[0]=f=>c.exportJSON())},{default:n(()=>[o(d,null,{default:n(()=>[o(a)]),_:1}),Zo]),_:1})}var Yo=C(Ko,[["render",Xo]]);const en={name:"SetupSideBar",components:{Back:pe,Document:Qe,DocumentCopy:Je,List:He,Management:Ke}},ee=e=>(q("data-v-0288e801"),e=e(),Q(),e),tn=ee(()=>_("span",null,"Back",-1)),on=ee(()=>_("span",null,"Overview",-1)),nn=ee(()=>_("span",null,"Dictionary",-1)),rn=ee(()=>_("span",null,"Instance Explanations",-1)),ln=ee(()=>_("span",null,"Task Explanations",-1));function sn(e,t,i,s,l,c){const a=r("Back"),d=r("el-icon"),m=r("el-menu-item"),f=r("Management"),h=r("List"),S=r("Document"),D=r("DocumentCopy"),g=r("el-menu"),w=r("el-col");return u(),b(w,null,{default:n(()=>[o(g,{"default-active":e.$route.path},{default:n(()=>[o(m,{index:"1",onClick:t[0]||(t[0]=()=>this.$router.push({name:"DocumentList"}))},{default:n(()=>[o(d,null,{default:n(()=>[o(a)]),_:1}),tn]),_:1}),o(m,{index:"/debug/overview",onClick:t[1]||(t[1]=()=>this.$router.push({name:"DebugOverview"}))},{default:n(()=>[o(d,null,{default:n(()=>[o(f)]),_:1}),on]),_:1}),o(m,{index:"/debug/dictionary",onClick:t[2]||(t[2]=()=>this.$router.push({name:"DebugDictionary"}))},{default:n(()=>[o(d,null,{default:n(()=>[o(h)]),_:1}),nn]),_:1}),o(m,{index:"2",onClick:t[3]||(t[3]=()=>this.$router.push({name:"DebugLocal"}))},{default:n(()=>[o(d,null,{default:n(()=>[o(S)]),_:1}),rn]),_:1}),o(m,{index:"3",onClick:t[4]||(t[4]=()=>this.$router.push({name:"DebugGlobal"}))},{default:n(()=>[o(d,null,{default:n(()=>[o(D)]),_:1}),ln]),_:1})]),_:1},8,["default-active"])]),_:1})}var cn=C(en,[["render",sn],["__scopeId","data-v-0288e801"]]);const Fe=O({id:"detailedDocument",state:()=>({document:null,maxWords:50}),getters:{getDocument:e=>e.document,getMaxWords:e=>e.maxWords},actions:{fetchDocument(e){const t=W();return Z.detailedDocument(t.getProjectInfo.id,e).then(i=>{const s={};for(let l of i.words){const c={};for(let a of l.word_annotation_score)c[a.annotation]=a,a.annotation in s||(s[a.annotation]=[]),s[a.annotation].push([a.score,a]);l.scores=c,delete l.word_annotation_score}for(let l in s){const c=s[l];c.sort((d,m)=>m[0]-d[0]);let a=0;for(let d=0;d<c.length;d++){const m=c[d];d>0&&c[d-1][0]!==m[0]&&(a=d),m[1].order=a}}this.document=i})}}});var ae={list(e,t){const i=t!==void 0?`&doc_id=${t}`:"";return k.get(`hilt/projects/${e}/dict/local/?page_size=10000`+i)},create(e,t){return k.post(`hilt/projects/${e}/dict/local/`,t)},delete(e,t){return k.delete(`hilt/projects/${e}/dict/local/${t}/`)}};const je=O({id:"dictionary_local",state:()=>({documents:{}}),getters:{getByDocumentID:e=>t=>e.documents[t],fetchIfExists:e=>(t,i,s)=>{if(!(t in e.documents))return null;const l=e.documents[t];if(!(i in l))return null;const c=l[i];return s in c?c[s]:null}},actions:{fetchDictionary(e){const t=W();return ae.list(t.getProjectInfo.id,e).then(i=>{const s=i.results,l={};for(let c of s){const a=c.word.document;a in l||(l[a]={});const d=c.word.id;d in l[a]||(l[a][d]={});const m=c.annotation;l[a][d][m]=c}this.documents=l})},addWord(e,t){const i=W();return ae.create(i.getProjectInfo.id,t).then(()=>{this.fetchDictionary(e)})},deleteWord(e){const t=W();return ae.delete(t.getProjectInfo.id,e).then(()=>this.fetchDictionary())}}});const an={name:"LocalSideBar",components:{Back:pe,Check:Ie},setup(){const e=me(),t=Fe(),i=Y(),s=je();return{documentStore:e,detailedDocumentStore:t,labelStore:i,localDictionaryStore:s}},created(){const e=[];e.push(this.labelStore.fetchLabels()),e.push(this.documentStore.resetState().then(()=>this.localDictionaryStore.fetchDictionary(this.documentStore.getDocuments[this.documentStore.getdocumentInfo.curDocIndex].id))),Promise.all(e).then(()=>{this.detailedDocumentStore.fetchDocument(this.documentStore.getDocuments[this.documentStore.getdocumentInfo.curDocIndex].id)})},methods:{pageChanged(e){this.documentStore.updateCurPage(e).then(()=>{this.detailedDocumentStore.fetchDocument(this.documentStore.getDocuments[this.documentStore.getdocumentInfo.curDocIndex].id)})},goToDocument(e,t){this.documentStore.setCurDocIndex(e),this.detailedDocumentStore.fetchDocument(t.id),this.localDictionaryStore.fetchDictionary(t.id)}}},dn=e=>(q("data-v-18621a56"),e=e(),Q(),e),un=dn(()=>_("span",null,"Back",-1)),_n={key:0},pn={key:1};function mn(e,t,i,s,l,c){const a=r("Back"),d=r("el-icon"),m=r("el-menu-item"),f=r("el-menu"),h=r("Check"),S=r("el-table-column"),D=r("el-link"),g=r("el-table"),w=r("el-pagination"),I=r("el-col"),x=se("snip");return u(),b(I,null,{default:n(()=>[o(f,null,{default:n(()=>[o(m,{onClick:t[0]||(t[0]=()=>this.$router.push({name:"DebugOverview"}))},{default:n(()=>[o(d,null,{default:n(()=>[o(a)]),_:1}),un]),_:1})]),_:1}),o(g,{data:s.documentStore.getDocuments},{default:n(()=>[o(S,{width:"40"},{default:n(y=>[y.row.annotated?(u(),v("span",_n,[o(d,null,{default:n(()=>[o(h)]),_:1})])):(u(),v("div",pn,P(y.$index+1),1))]),_:1}),o(S,{prop:"text"},{default:n(y=>[ie((u(),b(D,{onClick:F=>c.goToDocument(y.$index,y.row)},{default:n(()=>[p(P(y.row.text),1)]),_:2},1032,["onClick"])),[[x,{lines:3}]])]),_:1})]),_:1},8,["data"]),o(w,{background:"",layout:"prev, pager, next",total:s.documentStore.getdocumentInfo.totalDocCount,"page-size":s.documentStore.getdocumentInfo.pageSize,"current-page":s.documentStore.getdocumentInfo.curPage,onCurrentChange:c.pageChanged,style:{"text-align":"center"}},null,8,["total","page-size","current-page","onCurrentChange"])]),_:1})}var fn=C(an,[["render",mn],["__scopeId","data-v-18621a56"]]),xe={list(e,t,i,s){const l={};return t&&(l.page=t),i!=null&&(l.page_size=i),s!=null&&(l.q=s),k.get(`hilt/projects/${e}/words/`,{params:l})},documents(e,t){return k.get(`hilt/projects/${e}/words/${t}/`)}};const Pe=O({id:"words",state:()=>({words:[],curPage:1,maxPage:1,totalWordCount:0,curWordIndex:0,pageSize:10,currDocuments:[],searchQuery:void 0,wordLoaded:!1}),getters:{getWords:e=>e.words,getWordInfo:e=>e,getCurrWord:e=>()=>e.words[e.curWordIndex]?e.words[e.curWordIndex].text:void 0,getDocuments:e=>e.currDocuments},actions:{resetState(e=void 0){return this.curPage=1,this.pageSize=10,this.currDocuments=[],this.searchQuery=e,this.fetchWords()},setCurWordIndex(e){this.curWordIndex=e},fetchWords(){const e=W();return xe.list(e.getProjectInfo.id,this.curPage,this.pageSize,this.searchQuery).then(t=>(this.words=t.results,this.totalWordCount=t.count,this.maxPage=Math.ceil(this.totalWordCount/this.pageSize),t))},updateCurPage(e){return this.curPage=e,this.curWordIndex=0,this.currDocuments=[],this.fetchWords()},fetchDocuments(){this.wordLoaded=!1;const e=W();return xe.documents(e.getProjectInfo.id,this.getCurrWord()).then(t=>{for(const i of t.results)for(let s of i.words){const l={};for(let c of s.word_annotation_score)l[c.annotation]=c;s.scores=l,delete s.word_annotation_score}this.currDocuments=t.results,this.wordLoaded=!0})}}});var de={list(e,t){const i=t!==void 0?`&q=${t}`:"";return k.get(`hilt/projects/${e}/dict/global/?page_size=10000`+i)},create(e,t){return k.post(`hilt/projects/${e}/dict/global/`,t)},update(e,t){return k.put(`hilt/projects/${e}/dict/global/${t.id}/`,t)},delete(e,t){return k.delete(`hilt/projects/${e}/dict/global/${t}/`)}};const he=O({id:"dictionary_global",state:()=>({words:{},wordRows:[]}),getters:{getWords:e=>e.words,getRows:e=>e.wordRows,containsWord:e=>t=>t in e.words},actions:{fetchDictionary(e=void 0){const t=W();return de.list(t.getProjectInfo.id,e).then(i=>{const s=i.results,l={},c=[];for(let a of s)l[a.word]=c.length,c.push(a);this.words=l,this.wordRows=c})},addWord(e,t,i){const s=W();return de.create(s.getProjectInfo.id,{word:e,modification_type:t,ground_truth_label:i}).then(l=>{this.words[e]=this.wordRows.length,this.wordRows.push(l)})},deleteWord(e){const t=W();return de.delete(t.getProjectInfo.id,this.wordRows[this.words[e]].id).then(()=>this.fetchDictionary())}}});const hn={name:"GlobalSideBar",components:{Back:pe,Check:Ie,Search:_e},setup(){const e=Y(),t=Pe(),i=he();return{labelStore:e,wordStore:t,globalDictionaryStore:i}},data(){return{searchQuery:""}},watch:{searchQuery:function(e,t){console.log(e),e===""?this.wordStore.resetState().then(()=>{this.wordStore.fetchDocuments()}):this.wordStore.resetState(e).then(()=>{this.wordStore.fetchDocuments()})}},created(){this.$route.query.q!==void 0&&(this.searchQuery=this.$route.query.q);const e=[];e.push(this.labelStore.fetchLabels()),e.push(this.globalDictionaryStore.fetchDictionary()),this.searchQuery===""?e.push(this.wordStore.resetState()):e.push(this.wordStore.resetState(this.searchQuery)),Promise.all(e).then(()=>{this.wordStore.fetchDocuments()})},methods:{tableRowStyle({row:e}){return this.globalDictionaryStore.containsWord(e.text)?this.globalDictionaryStore.getRows[this.globalDictionaryStore.getWords[e.text]].modification_type==0?{color:"white",backgroundColor:"#67C23A"}:{color:"white",backgroundColor:"#F56C6C"}:{}},pageChanged(e){this.wordStore.updateCurPage(e).then(()=>{this.wordStore.fetchDocuments()})},goToDocument(e){this.wordStore.setCurWordIndex(e),this.wordStore.fetchDocuments()}}},gn=e=>(q("data-v-5cdc2f13"),e=e(),Q(),e),yn=gn(()=>_("span",null,"Back",-1)),Sn={style:{"align-content":"center"}},bn={key:0},xn={key:1};function Dn(e,t,i,s,l,c){const a=r("Back"),d=r("el-icon"),m=r("el-menu-item"),f=r("el-menu"),h=r("Search"),S=r("el-input"),D=r("Check"),g=r("el-table-column"),w=r("el-link"),I=r("el-table"),x=r("el-pagination"),y=r("el-col"),F=se("snip");return u(),b(y,null,{default:n(()=>[o(f,null,{default:n(()=>[o(m,{onClick:t[0]||(t[0]=()=>this.$router.push({name:"DebugOverview"}))},{default:n(()=>[o(d,null,{default:n(()=>[o(a)]),_:1}),yn]),_:1})]),_:1}),o(S,{modelValue:l.searchQuery,"onUpdate:modelValue":t[1]||(t[1]=j=>l.searchQuery=j),placeholder:"Type to search for words",style:{"margin-top":"20px",width:"90%"},clearable:""},{prefix:n(()=>[_("div",Sn,[o(d,null,{default:n(()=>[o(h)]),_:1})])]),_:1},8,["modelValue"]),o(I,{data:Array.from(s.wordStore.getWords),"row-style":c.tableRowStyle},{default:n(()=>[o(g,{width:"40"},{default:n(j=>[s.globalDictionaryStore.containsWord(j.row.text)?(u(),v("span",bn,[o(d,null,{default:n(()=>[o(D)]),_:1})])):(u(),v("div",xn,P(s.wordStore.getWordInfo.pageSize*(s.wordStore.getWordInfo.curPage-1)+j.$index+1),1))]),_:1}),o(g,{prop:"text"},{default:n(j=>[ie((u(),b(w,{key:j.row.text,onClick:V=>c.goToDocument(j.$index)},{default:n(()=>[p(P(j.row.text),1)]),_:2},1032,["onClick"])),[[F,{lines:3}]])]),_:1})]),_:1},8,["data","row-style"]),o(x,{background:"",layout:"prev, pager, next",total:s.wordStore.getWordInfo.totalWordCount,"page-size":s.wordStore.getWordInfo.pageSize,"current-page":s.wordStore.getWordInfo.curPage,onCurrentChange:c.pageChanged,style:{"text-align":"center"}},null,8,["total","page-size","current-page","onCurrentChange"])]),_:1})}var wn=C(hn,[["render",Dn],["__scopeId","data-v-5cdc2f13"]]);const vn={name:"DebugPage",components:{OverviewSideBar:cn,LocalSideBar:fn,GlobalSideBar:wn}};function kn(e,t,i,s,l,c){const a=r("OverviewSideBar"),d=r("LocalSideBar"),m=r("GlobalSideBar"),f=r("el-aside"),h=r("router-view"),S=r("el-main"),D=r("el-container");return u(),v("div",null,[o(D,null,{default:n(()=>[o(f,{style:{"border-right":"solid 1px #e6e6e6"}},{default:n(()=>[this.$route.path.endsWith("/overview")||this.$route.path.endsWith("/dictionary")?(u(),b(a,{key:0,style:{width:"100%"}})):L("",!0),this.$route.path.endsWith("/local")?(u(),b(d,{key:1,style:{width:"100%"}})):L("",!0),this.$route.path.endsWith("/global")?(u(),b(m,{key:2,style:{width:"100%"}})):L("",!0)]),_:1}),o(S,null,{default:n(()=>[o(h)]),_:1})]),_:1})])}var In=C(vn,[["render",kn]]);const $n={name:"DebugOverview"};function Cn(e,t,i,s,l,c){return"Debug Overview Page"}var Fn=C($n,[["render",Cn]]);const jn={name:"LocalExplanations",components:{ArrowLeft:$e,ArrowRight:Ce,Delete:le},setup(){const e=me(),t=Fe(),i=W(),s=je(),l=Y();return{documentStore:e,detailedDocumentStore:t,projectStore:i,localDictionaryStore:s,labelStore:l,TaskTypes:E,getLabelByID:l.getLabelByID}},data(){return{topK:3}},methods:{wordDelete(e){this.localDictionaryStore.deleteWord(e)},wordClick(e,t,i){const s=this.detailedDocumentStore.getDocument.id,l=this.localDictionaryStore.fetchIfExists(s,t,e);l===null?i>=0&&this.localDictionaryStore.addWord(s,{word:t,annotation:e,modification_type:i}):i==-1&&this.wordDelete(l.id)},getColors(e){const t=this.getLabelByID(e);return N[t.color_set].colors},getWordStyle(e,t){const i={padding:"3px 3px 3px 3px",margin:"3px 3px 3px 3px",fontSize:"18px"};if(this.topK>0&&e.order>=this.topK)return i;const s=e.score,l=this.getColors(t);let c=-1;return s<=0?i:(s<=.33?c=0:s<=.66?c=1:s<=1&&(c=2),U(U({},i),l[c]))},getProgressBarLabel(){let e=this.documentStore.getdocumentInfo;return`${e.annotatedDocCount} / ${e.totalDocCount} documents annotated`},goToPrevDoc(){const e=this.documentStore.getdocumentInfo.curDocIndex-1;e==-1?this.documentStore.updateCurPage(this.documentStore.getdocumentInfo.curPage-1).then(()=>{this.documentStore.setCurDocIndex(this.documentStore.getDocuments.length-1),this.detailedDocumentStore.fetchDocument(this.documentStore.getDocuments[this.documentStore.getDocuments.length-1].id)}):(this.documentStore.setCurDocIndex(e),this.detailedDocumentStore.fetchDocument(this.documentStore.getDocuments[e].id))},goToNextDoc(){const e=this.documentStore.getdocumentInfo.curDocIndex+1;this.documentStore.getDocuments.length==e?this.documentStore.updateCurPage(this.documentStore.getdocumentInfo.curPage+1).then(()=>{this.detailedDocumentStore.fetchDocument(this.documentStore.getDocuments[0].id),this.localDictionaryStore.fetchDictionary(this.documentStore.getDocuments[0].id)}):(this.documentStore.setCurDocIndex(e),this.detailedDocumentStore.fetchDocument(this.documentStore.getDocuments[e].id),this.localDictionaryStore.fetchDictionary(this.documentStore.getDocuments[e].id))},noAnnotation(){this.documentStore.markAnnotated().then(()=>{const e=this.documentStore.getdocumentInfo.curDocIndex+1;this.documentStore.getDocuments.length!==e&&this.documentStore.getdocumentInfo.curPage!==this.documentStore.getdocumentInfo.maxPage&&this.goToNextDoc()})}},computed:{annotationCompletionPercentage:function(){let e=this.documentStore.getdocumentInfo;return e.totalDocCount==0?0:100*e.annotatedDocCount/e.totalDocCount},dictTableData:function(){const e=this.detailedDocumentStore.getDocument.id,t=this.localDictionaryStore.getByDocumentID(e),i=[];if(e===void 0||t===void 0)return i;const s=this.detailedDocumentStore.getDocument.words;for(const l of s){const c=l.id;if(!(c in t))continue;const a=t[c];for(const d in a){const m=a[d].id,f=l.scores[d].score;let h;for(const S of this.detailedDocumentStore.getDocument.annotations)if(S.id==d){h=S.label;break}i.push({id:m,word:l.text,score:{score:f,order:0},label:h,type:a[d].modification_type})}}return i}}},Pn={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Ln={style:{"text-align":"center"}},Wn={style:{width:"100%"}},Mn={key:0,class:"demonstration"},Tn={key:1,class:"demonstration"},Bn=p("Words"),Vn=p("Model Output"),An={style:{"text-align":"right",margin:"0"}},Un=p(" add "),En=p(" remove "),On=p(" reset "),zn=p("Add"),Nn=p("Remove"),Rn=p("Delete"),Gn=p(" Prev "),qn=p(" Next "),Qn=p(" Skip (Nothing to Mark Up)");function Jn(e,t,i,s,l,c){const a=r("el-row"),d=r("el-progress"),m=r("el-slider"),f=r("el-tag"),h=r("el-divider"),S=r("el-button"),D=r("el-popover"),g=r("el-col"),w=r("el-table-column"),I=r("Delete"),x=r("el-icon"),y=r("el-popconfirm"),F=r("el-table"),j=r("el-card"),V=r("ArrowLeft"),te=r("ArrowRight");return u(),b(a,{style:{width:"100%"}},{default:n(()=>[o(a,{style:{width:"100%"}},{default:n(()=>[_("div",Pn,[_("h1",Ln," Annotate page ("+P(s.TaskTypes[this.projectStore.task])+") ",1)])]),_:1}),o(a,{style:{width:"100%"}},{default:n(()=>[o(d,{style:{width:"100%"},percentage:c.annotationCompletionPercentage,format:c.getProgressBarLabel,type:"line","stroke-width":30,"text-inside":""},null,8,["percentage","format"]),_("div",Wn,[l.topK>0?(u(),v("span",Mn,"Top "+P(l.topK)+" words",1)):L("",!0),l.topK==0?(u(),v("span",Tn,"All words")):L("",!0),o(m,{modelValue:l.topK,"onUpdate:modelValue":t[0]||(t[0]=$=>l.topK=$),max:this.detailedDocumentStore.getMaxWords},null,8,["modelValue","max"])])]),_:1}),this.detailedDocumentStore.getDocument?(u(),b(j,{key:0,style:{width:"100%","margin-top":"10px"}},{default:n(()=>[o(a,null,{default:n(()=>[o(g,{span:16},{default:n(()=>[o(a,null,{default:n(()=>[o(f,null,{default:n(()=>[Bn]),_:1}),"ground_truth"in this.detailedDocumentStore.getDocument?(u(),b(f,{key:0,style:{"margin-left":"10px"}},{default:n(()=>[p(" Ground truth: "+P(s.getLabelByID(this.detailedDocumentStore.getDocument.ground_truth).text),1)]),_:1})):L("",!0)]),_:1}),o(a,{style:{"line-height":"2","margin-top":"10px"}},{default:n(()=>[_("div",null,[(u(!0),v(M,null,B(this.detailedDocumentStore.getDocument.words,$=>(u(),v("span",{style:{padding:"3px","font-size":"18px"},key:$.id},P($.text),1))),128))])]),_:1}),o(h),(u(!0),v(M,null,B(this.detailedDocumentStore.getDocument.annotations,$=>(u(),b(a,{style:{"margin-top":"10px"},key:$.id},{default:n(()=>[o(a,{style:{width:"100%"}},{default:n(()=>[o(f,{style:{"margin-right":"10px"}},{default:n(()=>[Vn]),_:1}),o(f,null,{default:n(()=>[p("Label: "+P(s.getLabelByID($.label).text),1)]),_:2},1024)]),_:2},1024),o(a,{style:{"line-height":"2","margin-top":"10px"}},{default:n(()=>[_("div",null,[(u(!0),v(M,null,B(this.detailedDocumentStore.getDocument.words,A=>(u(),v("span",{key:A.id,style:R(c.getWordStyle(A.scores[$.id],$.label))},[o(D,{trigger:"hover",width:"200px"},{reference:n(()=>[_("span",null,P(A.text),1)]),default:n(()=>[_("p",null,P(A.text+": "+A.scores[$.id].score),1),_("div",An,[o(S,{size:"small",type:"success",onClick:ge=>c.wordClick($.id,A.id,0)},{default:n(()=>[Un]),_:2},1032,["onClick"]),o(S,{size:"small",type:"primary",onClick:ge=>c.wordClick($.id,A.id,1)},{default:n(()=>[En]),_:2},1032,["onClick"]),o(S,{size:"small",type:"info",onClick:ge=>c.wordClick($.id,A.id,-1)},{default:n(()=>[On]),_:2},1032,["onClick"])])]),_:2},1024)],4))),128))])]),_:2},1024)]),_:2},1024))),128))]),_:1}),o(g,{span:8},{default:n(()=>[o(F,{data:c.dictTableData,border:"",style:{width:"100%"}},{default:n(()=>[o(w,{label:"Word"},{default:n($=>[_("span",{style:R(c.getWordStyle($.row.score,$.row.label))},P($.row.word),5)]),_:1}),o(w,{label:"Type"},{default:n($=>[$.row.type==0?(u(),b(f,{key:0,type:"success"},{default:n(()=>[zn]),_:1})):L("",!0),$.row.type==1?(u(),b(f,{key:1,type:"danger"},{default:n(()=>[Nn]),_:1})):L("",!0)]),_:1}),o(w,{label:"Operations"},{default:n($=>[o(y,{title:"Are you sure?",onConfirm:A=>c.wordDelete($.row.id),style:{"margin-left":"10px"}},{reference:n(()=>[o(S,{size:"small",type:"danger"},{default:n(()=>[o(x,null,{default:n(()=>[o(I)]),_:1}),Rn]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})):L("",!0),o(a,{style:{"margin-top":"20px",width:"100%"}},{default:n(()=>[o(g,{style:{display:"flex","justify-content":"space-between"}},{default:n(()=>[o(S,{type:"primary",onClick:t[1]||(t[1]=$=>c.goToPrevDoc()),disabled:this.documentStore.getdocumentInfo.curDocIndex===0&&this.documentStore.getdocumentInfo.curPage===1},{default:n(()=>[o(x,null,{default:n(()=>[o(V)]),_:1}),Gn]),_:1},8,["disabled"]),o(S,{type:"primary",onClick:t[2]||(t[2]=$=>c.goToNextDoc()),disabled:this.documentStore.getdocumentInfo.curDocIndex===this.documentStore.getdocumentInfo.documents.length-1&&this.documentStore.getdocumentInfo.curPage===this.documentStore.getdocumentInfo.maxPage},{default:n(()=>[qn,o(x,null,{default:n(()=>[o(te)]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),this.detailedDocumentStore.getDocument?(u(),b(a,{key:1,style:{"margin-top":"10px",width:"100%"}},{default:n(()=>[o(g,{style:{display:"flex","justify-content":"flex-end"}},{default:n(()=>[o(S,{type:"primary",onClick:c.noAnnotation},{default:n(()=>[Qn,o(x,null,{default:n(()=>[o(te)]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})):L("",!0)]),_:1})}var Hn=C(jn,[["render",Jn]]);const Kn={name:"GlobalExplanations",components:{ArrowLeft:$e,ArrowRight:Ce},setup(){const e=Y(),t=Pe(),i=he(),s=W();return{labelStore:e,wordStore:t,globalDictionaryStore:i,projectStore:s,TaskTypes:E,getLabelByID:e.getLabelByID}},computed:{documents:function(){return this.wordStore.getDocuments}},methods:{addWord(e){this.globalDictionaryStore.addWord(this.wordStore.getCurrWord(),e,this.getLabelByID(this.documents[0].ground_truth).id)},getColors(e){const t=this.getLabelByID(e);return N[t.color_set].colors},getWordStyle(e,t){const i={padding:"3px 3px 3px 3px",margin:"3px 3px 3px 3px",fontSize:"18px"},s=e.score,l=this.getColors(t);let c=-1;return s<=0?i:(s<=.33?c=0:s<=.66?c=1:s<=1&&(c=2),U(U({},i),l[c]))},goToPrevWord(){const e=this.wordStore.getWordInfo.curWordIndex-1;e==-1?this.wordStore.updateCurPage(this.wordStore.getWordInfo.curPage-1).then(()=>{this.wordStore.setCurWordIndex(this.wordStore.getWords.length-1),this.wordStore.fetchDocuments()}):(this.wordStore.setCurWordIndex(e),this.wordStore.fetchDocuments())},goToNextWord(){const e=this.wordStore.getWordInfo.curWordIndex+1;this.wordStore.getWords.length==e?this.wordStore.updateCurPage(this.wordStore.getWordInfo.curPage+1).then(()=>{this.wordStore.fetchDocuments()}):(this.wordStore.setCurWordIndex(e),this.wordStore.fetchDocuments())}}},Zn={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Xn={style:{"text-align":"center"}},Yn=p(" Prev "),er=p(" Next "),tr=p(" Current Word: "),or={style:{"margin-left":"10px",display:"inline-block"}},nr=p(" add "),rr=p(" remove "),lr=p(" reset ");function sr(e,t,i,s,l,c){const a=r("el-row"),d=r("ArrowLeft"),m=r("el-icon"),f=r("el-button"),h=r("ArrowRight"),S=r("el-col"),D=r("el-tag"),g=r("el-popover"),w=r("el-divider"),I=r("el-card");return u(),b(a,{style:{width:"100%"}},{default:n(()=>[o(a,{style:{width:"100%"}},{default:n(()=>[_("div",Zn,[_("h1",Xn," Annotate page ("+P(s.TaskTypes[this.projectStore.task])+") ",1)])]),_:1}),s.wordStore.getCurrWord()!==void 0?(u(),b(a,{key:0,style:{"margin-top":"20px",width:"100%"}},{default:n(()=>[o(S,{style:{display:"flex","justify-content":"space-between"}},{default:n(()=>[o(f,{type:"primary",onClick:t[0]||(t[0]=x=>c.goToPrevWord()),disabled:this.wordStore.getWordInfo.curWordIndex===0&&this.wordStore.getWordInfo.curPage===1},{default:n(()=>[o(m,null,{default:n(()=>[o(d)]),_:1}),Yn]),_:1},8,["disabled"]),o(f,{type:"primary",onClick:t[1]||(t[1]=x=>c.goToNextWord()),disabled:this.wordStore.getWordInfo.curWordIndex===this.wordStore.getWordInfo.words.length-1&&this.wordStore.getWordInfo.curPage===this.wordStore.getWordInfo.maxPage},{default:n(()=>[er,o(m,null,{default:n(()=>[o(h)]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})):L("",!0),s.wordStore.wordLoaded?(u(),b(I,{key:1,style:{width:"100%","margin-top":"10px"}},{header:n(()=>[_("div",null,[tr,_("b",null,P(this.wordStore.getCurrWord()),1),_("div",or,[s.globalDictionaryStore.containsWord(s.wordStore.getCurrWord())?L("",!0):(u(),b(f,{key:0,size:"small",type:"success",onClick:t[2]||(t[2]=x=>c.addWord(0))},{default:n(()=>[nr]),_:1})),s.globalDictionaryStore.containsWord(s.wordStore.getCurrWord())?L("",!0):(u(),b(f,{key:1,size:"small",type:"primary",onClick:t[3]||(t[3]=x=>c.addWord(1))},{default:n(()=>[rr]),_:1})),s.globalDictionaryStore.containsWord(s.wordStore.getCurrWord())?(u(),b(f,{key:2,size:"small",type:"info",onClick:t[4]||(t[4]=x=>s.globalDictionaryStore.deleteWord(s.wordStore.getCurrWord()))},{default:n(()=>[lr]),_:1})):L("",!0)])])]),default:n(()=>[(u(!0),v(M,null,B(c.documents,(x,y)=>(u(),b(a,{style:{width:"100%"},key:x.id},{default:n(()=>[(u(!0),v(M,null,B(x.annotations,F=>(u(),b(a,{style:{width:"100%"},key:F.id},{default:n(()=>[o(a,{style:{width:"100%"}},{default:n(()=>[o(D,null,{default:n(()=>[p("Document #"+P(y+1),1)]),_:2},1024),"ground_truth"in x?(u(),b(D,{key:0,style:{"margin-left":"10px"}},{default:n(()=>[p(" Ground truth: "+P(s.getLabelByID(x.ground_truth).text),1)]),_:2},1024)):L("",!0),o(D,{style:{"margin-left":"10px"}},{default:n(()=>[p(" Prediction: "+P(s.getLabelByID(F.label).text),1)]),_:2},1024)]),_:2},1024),o(a,{style:{"line-height":"2","margin-top":"10px"}},{default:n(()=>[_("div",null,[(u(!0),v(M,null,B(x.words,j=>(u(),v("span",{key:j.id,style:R(c.getWordStyle(j.scores[F.id],F.label))},[o(g,{content:j.text+": "+j.scores[F.id].score,trigger:"hover"},{reference:n(()=>[_("span",{style:R(j.text===this.wordStore.getCurrWord()?{border:"2px solid black"}:{})},P(j.text),5)]),_:2},1032,["content"])],4))),128))])]),_:2},1024)]),_:2},1024))),128)),o(w)]),_:2},1024))),128))]),_:1})):L("",!0)]),_:1})}var ir=C(Kn,[["render",sr]]);const cr={name:"DictionaryOverview",components:{Search:_e,Delete:le},setup(){return{dictionaryStore:he()}},data(){return{searchQuery:""}},watch:{searchQuery:function(e,t){this.dictionaryStore.fetchDictionary(e)}},methods:{indexMethod(e){return e+1},onClick(e,t){this.$router.push({name:"DebugGlobal",query:{q:t.word}})},handleDelete(e,t){this.dictionaryStore.deleteWord(t.word).then(()=>{this.dictionaryStore.fetchDictionary()})}},created(){this.dictionaryStore.fetchDictionary()}},ar={style:{"text-align":"center"}},dr=_("div",null,[_("h1",null,"Task Dictionary")],-1),ur={style:{"align-content":"center"}},_r=["onClick"],pr=p("Delete");function mr(e,t,i,s,l,c){const a=r("Search"),d=r("el-icon"),m=r("el-input"),f=r("el-table-column"),h=r("Delete"),S=r("el-button"),D=r("el-popconfirm"),g=r("el-table");return u(),v("div",null,[_("div",ar,[dr,o(m,{modelValue:l.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=w=>l.searchQuery=w),modelModifiers:{lazy:!0,trim:!0},placeholder:"Type to search for words",style:{width:"50%"},clearable:""},{prefix:n(()=>[_("div",ur,[o(d,null,{default:n(()=>[o(a)]),_:1})])]),_:1},8,["modelValue"])]),o(g,{data:Array.from(s.dictionaryStore.getRows),stripe:""},{default:n(()=>[o(f,{type:"index",index:c.indexMethod},null,8,["index"]),o(f,{label:"Text",sortable:""},{default:n(w=>[_("p",{onClick:I=>c.onClick(w.$index,w.row),style:{cursor:"pointer"}},P(w.row.word),9,_r)]),_:1}),o(f,{label:"Operations"},{default:n(w=>[o(D,{title:"Are you sure?",onConfirm:I=>c.handleDelete(w.$index,w.row),style:{"margin-left":"10px"}},{reference:n(()=>[o(S,{size:"small",type:"danger"},{default:n(()=>[o(d,null,{default:n(()=>[o(h)]),_:1}),pr]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])])}var fr=C(cr,[["render",mr]]),ne={updateToken(e){k.defaults.headers.Authorization=`Bearer ${e}`},login(e,t,i=!1){const s=z();return k.post("token/",{username:e,password:t,rememberMe:i}).then(l=>(l.token=l.access,delete l.access,s.login(K(U({},l),{username:e})),l))},refreshToken(){const e=z();return k.post("token/refresh/",{token:e.token}).then(t=>{e.updateToken(t.token)})}};const hr={name:"LoginPage",components:{UserFilled:Ze,Lock:Xe},data(){return{loginForm:{username:"",password:"",rememberMe:!1},rules:{username:[{required:!0,message:"Please input username",trigger:"blur"}],password:[{required:!0,message:"Please input password",trigger:"blur"}]},isLoading:!1,isValid:!1,showLoginFailed:"none"}},methods:{login(){this.$refs.loginForm.validate(e=>{if(e)this.isLoading=!0,this.showLoginFailed="none",ne.login(this.loginForm.username,this.loginForm.password,this.loginForm.rememberMe).catch(()=>{this.isLoading=!1,this.showLoginFailed=""});else return!1})}}},gr={style:{display:"flex","justify-content":"center"}},yr=p(" Login ");function Sr(e,t,i,s,l,c){const a=r("el-alert"),d=r("UserFilled"),m=r("el-icon"),f=r("el-input"),h=r("el-form-item"),S=r("Lock"),D=r("el-checkbox"),g=r("el-button"),w=r("el-form"),I=r("el-col"),x=se("loading");return u(),v("div",gr,[ie((u(),b(I,{span:6},{default:n(()=>[o(a,{title:"Invalid username/password",type:"error","show-icon":"",style:R({display:l.showLoginFailed})},null,8,["style"]),o(w,{model:l.loginForm,rules:l.rules,ref:"loginForm"},{default:n(()=>[o(h,{label:"Username",prop:"username",class:"bold-label"},{default:n(()=>[o(f,{modelValue:l.loginForm.username,"onUpdate:modelValue":t[0]||(t[0]=y=>l.loginForm.username=y)},{prefix:n(()=>[o(m,null,{default:n(()=>[o(d)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(h,{label:"Password",prop:"password",class:"bold-label"},{default:n(()=>[o(f,{type:"password",modelValue:l.loginForm.password,"onUpdate:modelValue":t[1]||(t[1]=y=>l.loginForm.password=y)},{prefix:n(()=>[o(m,null,{default:n(()=>[o(S)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(h,null,{default:n(()=>[o(D,{label:"Remember me",modelValue:l.loginForm.rememberMe,"onUpdate:modelValue":t[2]||(t[2]=y=>l.loginForm.rememberMe=y)},null,8,["modelValue"])]),_:1}),o(h,null,{default:n(()=>[o(g,{type:"primary",onClick:c.login,disabled:this.isValid,style:{width:"100%"}},{default:n(()=>[yr]),_:1},8,["onClick","disabled"])]),_:1})]),_:1},8,["model","rules"])]),_:1})),[[x,l.isLoading]])])}var br=C(hr,[["render",Sr],["__scopeId","data-v-0194bcf7"]]);const xr={name:"LogoutPage",setup(){return{userStore:z()}},created(){this.userStore.logout()}};function Dr(e,t,i,s,l,c){return u(),v("div")}var wr=C(xr,[["render",Dr]]);const X=Ye({history:et("/"),routes:[{path:"/",name:"Home",component:_t},{path:"/projects",name:"Projects",component:kt},{path:"/login",name:"Login",component:br},{path:"/logout",component:wr},{path:"/project/",component:Et,children:[{path:"doc/",component:Nt,children:[{path:"upload",name:"DocumentUpload",component:Io},{path:"list",name:"DocumentList",component:Kt},{path:"model",name:"ModelUpload",component:To}]},{path:"labels",name:"Labels",component:No},{path:"generate-explanations",name:"GenerateExplanations",component:Ho},{path:"export",name:"ExportData",component:Yo}]},{path:"/debug/",component:In,children:[{path:"overview",name:"DebugOverview",component:Fn},{path:"dictionary",name:"DebugDictionary",component:fr},{path:"local",name:"DebugLocal",component:Hn},{path:"global",name:"DebugGlobal",component:ir}]}]});X.beforeEach((e,t,i)=>{!z().isLoggedIn&&e.name!=="Login"&&e.name!=="Home"?i("/login"):i()});X.afterEach(()=>{const e=z();e.isLoggedIn&&e.inspectToken()});const z=O({id:"user",presist:!0,state:()=>({userInfo:null}),getters:{username:e=>e.userInfo.username,token:e=>e.userInfo.token,isLoggedIn:e=>e.userInfo!==null},actions:{login(e){this.userInfo=e,ne.updateToken(e.token),X.push({name:"Projects"}).then(t=>t)},logout(){this.userInfo=null,X.push("/").then(e=>e)},updateToken(e){this.userInfo.token=e,ne.updateToken(e)},inspectToken(){const e=this.userInfo.token;if(e){const t=tt(e),i=t.exp,s=t.orig_iat;i<Date.now()/1e3?this.logout():i-Date.now()/1e3<1800&&Date.now()/1e3-s<628200&&ne.refreshToken()}}}});var vr="/assets/logo.4941f0a9.png";const kr={name:"NavBar",components:{},setup(){return{userStore:z(),Logo:vr}},methods:{loginClicked(){this.userStore.isLoggedIn?this.$router.push("/login"):this.$router.push("/logout")}}},Ir=p(" HILT "),$r=p(" Projects ");function Cr(e,t,i,s,l,c){const a=r("el-image"),d=r("el-menu-item"),m=r("el-button"),f=r("el-menu");return u(),b(f,{"default-active":e.$route.path,mode:"horizontal",router:!0},{default:n(()=>[o(d,{index:"/"},{default:n(()=>[o(a,{src:s.Logo,style:{width:"58px",height:"58px"}},null,8,["src"])]),_:1}),o(d,{index:"1"},{default:n(()=>[Ir]),_:1}),s.userStore.isLoggedIn?(u(),b(d,{key:0,index:"/projects"},{default:n(()=>[$r]),_:1})):L("",!0),o(d,{index:s.userStore.isLoggedIn?"/logout":"/login",class:"dock-right"},{default:n(()=>[o(m,{onClick:t[0]||(t[0]=h=>c.loginClicked(h)),jest:"logBtn"},{default:n(()=>[p(P(this.userStore.isLoggedIn?"Logout":"Login"),1)]),_:1})]),_:1},8,["index"])]),_:1},8,["default-active"])}var Fr=C(kr,[["render",Cr],["__scopeId","data-v-6c47ac32"]]);const jr={components:{NavBar:Fr}},Pr={id:"app"};function Lr(e,t,i,s,l,c){const a=r("NavBar"),d=r("router-view");return u(),v("div",Pr,[o(a,{style:{width:"100%"}}),o(d)])}var Wr=C(jr,[["render",Lr]]);const H=ot(Wr);H.use(nt);H.provide("$api",k);H.use(rt,{locale:lt});const Le=st();Le.use(it);H.use(Le);H.use(X);H.mount("#app");
